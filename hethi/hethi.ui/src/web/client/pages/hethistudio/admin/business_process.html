<div class="text-lowercase" data-ng-controller="businessProcessController">
    <div class="panel panel-primary">
        <div class="panel-heading"><strong><span class="glyphicon glyphicon-th"></span> business rules</strong></div>
        <div class="panel-body">
            <div ng-switch="isRuleDiv">
                <div ng-switch-when="true">

                    <div class="divider"></div>

                    <div class="row">
                        <form data-ng-submit="showRuleList(rulesPack)">
                            <div class="col-md-3">
                                <label class="control-label">packages</label>

                                <div class="input-group">
                                    <select  ng-model="rulesPack.packageId" required="" class="firstDropDown form-control"  ng-change="selectWorkSet(rulesPack.packageId)">
                                        <option value="">select packages</option>
                                        <option ng-selected="$first" value="{{package.rule_package_id}}" ng-repeat="package in packageList">{{package.rule_package_name}}</option>
                                    </select>
                         <span class="mouse_point input-group-addon" data-toggle="tooltip" data-placement="bottom"
                               title="Add New Package">
                             <span class="fa fa-plus" data-toggle="modal" data-target="#newPackages"></span>
                        </span>
                                    <!--<span class="mouse_point fa fa-trash input-group-addon" data-toggle="tooltip" data-placement="bottom"-->
                                    <!--title="Delete Package">-->
                                    <!--</span>-->
                                </div>
                            </div>
                            <div class="col-md-3">
                                <label class="control-label">workset</label>

                                <div class="input-group">
                                    <select ng-model="rulesPack.workSet" required="" class="secondDropDown form-control" ng-change="selectRuleSet(rulesPack.workSet)"  >
                                        <option value="">select workSet</option>
                                        <option ng-selected="$first" value="{{workset.workset_id}}" ng-repeat="workset in WorkSetLists">{{workset.workset_name}}</option>
                                    </select>
                        <span class="mouse_point input-group-addon" data-toggle="tooltip" data-placement="bottom"
                              title="Add New WorkSet">
                             <span class="fa fa-plus" data-toggle="modal" data-target="#newWorkSet"></span>
                        </span>
                                    <!--<span class="mouse_point  fa fa-trash input-group-addon" data-toggle="tooltip" data-placement="bottom"-->
                                    <!--title="Delete WorkSet">-->
                                    <!--</span>-->
                                </div>
                            </div>
                            <div class="col-md-3">
                                <label class="control-label">ruleset</label>

                                <div class="input-group">
                                    <select required=""  class="thirdDropDown form-control" ng-model="rulesPack.ruleSet" >
                                        <option value="">select ruleset</option>
                                        <option ng-if="WorkSetLists.length > 0" ng-selected="$first" value="{{ruleset.cruleset_id}}" ng-repeat="ruleset in RuleSetLists">{{ruleset.crulesset_name}}</option>
                                    </select>
                        <span class="mouse_point input-group-addon" data-toggle="tooltip" data-placement="bottom"
                              title="Add New RuleSet">
                             <span class="fa fa-plus" data-toggle="modal" data-target="#newRuleSet"></span>
                        </span>
                                    <!--<span class="mouse_point  fa fa-trash input-group-addon" data-toggle="tooltip" data-placement="bottom"-->
                                    <!--title="Delete Rule">-->
                                    <!--</span>-->
                                </div>

                            </div>
                            <div class="col-md-3">
                                <label class="control-label font_w">package white space</label>

                                <button type="submit" class="btn_hethi btn-primary btn-w-md" >show rules</button>
                                <button type="button" style="margin-left: 5px" class=" btn_hethi btn-danger " data-toggle="modal" data-target="#editPackage">edit package</button>

                            </div>
                        </form>

                    </div>

                    <div class="divider-md"></div>

                    <div class="row">
                        <div class="col-md-12">
                           <div class="">
                               <button class="btn_hethi btn-info" data-ng-click="setRuleDiv()" type="button">
                                   <span class="fa fa-plus"> new rule</span>

                               </button>
                           </div>
                        </div>
                    </div>

                    <div class="divider-md"></div>

                    <div class="row margin-bottom-20">
                        <div class="col-md-12">
                            <div class="bg_txt text-center" style="padding-bottom: 20px">
                                <span class="text-primary  h3"> Rules List</span>
                            </div>
                        </div>
                    </div>

                        <div class="row margin-bottom-20">
                            <div class="col-md-12">
                                <div class="panel panel-info " ng-repeat="rule in ruleTemp" >
                                   <div class=" mouse_point panel-heading" ng-click="hideOthers($index,rule,'open')">
                                           <span class="panel-title" >{{rule.rule_name}}</span>

                                   </div>
                                    <div class="panel-body" ng-if="rule.status">
                                        <div class="row">
                                            <div class="col-md-12">
                                                <div class="row margin-bottom-20 pull-right">
                                                    <div class="col-md-12">
                                                         <span class=" btn_hethi_square  btn-success mouse_point" data-ng-click="enableEdit(rule,$index)">
                                                             enable edit mode
                                                         </span>&nbsp;&nbsp;
                                                         <span ng-show="ruleRepo.length > 0" ng-click="viewEditHistory(rule)"
                                                              class="text-primary mouse_point btn_hethi_square btn-info" style="text-decoration: none">
                                                            view edit history</span>
                                                    </div>
                                                </div>
                                                <div class="row  margin-bottom-20">
                                                    <div class="col-md-12">
                                                        <div class="input-group">
                                                            <span ng-hide="shows" data-ng-click="shows=!shows"
                                                                  class="fa fa-plus-square-o mouse_point">
                                                            </span>
                                                            <span ng-show="shows" data-ng-click="shows=!shows"
                                                                  class="fa fa-minus-square-o mouse_point">
                                                            </span>
                                                            <span class="fa fa-long-arrow-right"></span>
                                                            <span class="otherwiseBlock">
                                                                 rule name
                                                            </span>
                                                            <span class="thenDataBlock">
                                                                 {{rule.rule_name}}
                                                            </span>
                                                            <span class="fa fa-long-arrow-right"> </span>
                                                            <span class="thenBlock">
                                                                 rule description
                                                            </span>
                                                            <span ng-show="!rule.editMode" class="thenDataBlock">
                                                                 {{rule.rule_comments}}
                                                            </span>
                                                            <input type="text" ng-show="rule.editMode" class="descDataBlock"
                                                                   ng-model="rule.rule_comments">

                                                        </div>
                                                    </div>

                                                </div>
                                                <div class="margin-bottom-20 row ">
                                                    <div class="col-md-1"></div>
                                                    <div class="col-md-11">
                                                        <span class="fa fa-hand-o-right"></span>
                                                     <span class="btn-group">
                                                                  <button type="button" btn-radio="1" data-ng-click="enableOrDisable($index,1)"
                                                                          ng-class="rule.rule_status == 1 ?'active btn btn-line-info':'btn btn-line-info'">enabled</button>
                                                                  <button type="button" btn-radio="0" data-ng-click="enableOrDisable($index,0)"
                                                                          ng-class="rule.rule_status == 0 ?'active btn btn-line-info':'btn btn-line-info'">disabled</button>
                                                            </span>
                                                        <span class="fa fa-long-arrow-right"> </span>
                                                            <span class="otherwiseBlock">
                                                                 effective start
                                                            </span>
                                                            <span ng-show="!rule.editMode" id="startdate" class="thenDataBlock">
                                                                {{rule.effective_startdate}}
                                                            </span>
                                                            <span ng-show="rule.editMode" class="ui-datepicker">
                                                                  <input type="text"
                                                                         datepicker-popup="{{format}}"
                                                                         ng-model="rule.effective_startdate"
                                                                         is-open="opened"
                                                                         min="minDate"
                                                                         datepicker-options="dateOptions"
                                                                         ng-required="true"
                                                                         close-text="Close">
                                                                  <!--<span class="input-group-addon" ng-click="open($event)"><i class="fa fa-calendar"></i></span>-->
                                                            </span>
                                                        <span class="fa fa-long-arrow-right"> </span>
                                                            <span class="otherwiseBlock">
                                                                  effective end
                                                            </span>
                                                            <span id="enddate" ng-show="!rule.editMode" class="otherwiseDataBlock">
                                                                  {{rule.effective_enddate}}
                                                            </span>
                                                            <span ng-show="rule.editMode" class="ui-datepicker">
                                                                  <input type="text"

                                                                         datepicker-popup="{{format}}"
                                                                         ng-model="rule.effective_enddate"
                                                                         is-open="opened1"
                                                                         min="minDate"
                                                                         datepicker-options="dateOptions"
                                                                         ng-required="true"
                                                                         close-text="Close">
                                                            </span>
                                                    </div>

                                                </div>
                                                <div class="row " ng-show="shows">
                                                    <ul class="treeview" style="list-style-type: none">

                                                        <li class="margin-bottom-20" >

                                                            <span class="whenBlock margin-bottom-20">
                                                                when
                                                            </span>

                                                            <ul class="margin-top-10 " style="list-style-type: none">
                                                                <li ng-repeat="list in fieldList" class="margin-bottom-20">
                                                                    <span class="entityEndBlock">
                                                                          entity
                                                                    </span>
                                                                    <span class="thenDataBlock" ng-if="list.operation_name != undefined">
                                                                         {{list.field}}
                                                                    </span>
                                                                    <span ng-if="list.lookup" class="fa  fa-long-arrow-right"></span>
                                                                    <span ng-if="list.lookup" class="entityEndBlock">
                                                                          lookup entity
                                                                    </span>
                                                                    <span class="thenDataBlock" ng-if="list.lookup && list.operation_name != undefined">
                                                                         {{list.lookup}}
                                                                    </span>
                                                                    <span class="fa  fa-long-arrow-right"></span>
                                                                    <span class="operationEndBlock">
                                                                          operation
                                                                    </span>
                                                                    <span class="thenDataBlock" ng-if="list.operation_name != undefined">
                                                                         {{list.operation_name}}
                                                                    </span>
                                                                    <span class="fa  fa-long-arrow-right"></span>
                                                                    <span class="thenBlock">
                                                                          value {{list.fieldStatus}}
                                                                    </span>
                                                                    <span ng-hide="rule.editMode" class="thenDataBlock">
                                                                         {{list.value}}
                                                                    </span>
                                                                    <input  ng-show="rule.editMode && list.fieldStatus.length == 0" type="text"
                                                                            ng-model="list.value">
                                                                    <select ng-if="list.fieldStatus.length > 0 && rule.editMode" ng-model="list.value">
                                                                        <option value="{{entity.column}}" ng-selected="entity.column == selectedEntity" ng-repeat="entity in selectedEfsUin">{{entity.column}}</option>
                                                                    </select>
                                                                    &nbsp;&nbsp;
                                                                    <!--<span ng-show="rule.editMode" ng-if="fieldList.length > 1" class="btn_hethi_square btn-danger" ng-click="fieldList.splice($index,1)">-->
                                                                        <!--remove this entity</span>-->
                                                                    <!--&nbsp;&nbsp;-->
                                                                    <!--<span ng-show="rule.editMode" ng-if="$last" class="btn_hethi_square btn-info" ng-click="fieldList.push({id:fieldList.length+1})">-->
                                                                        <!--add new entity</span>-->
                                                                </li>
                                                            </ul>
                                                        </li>
                                                        <li>
                                                            <div class="input-group margin-bottom-20">
                                                                 <span  class="thenBlock">
                                                                     then
                                                                 </span>
                                                                 <span class="thenDataBlock">
                                                                      {{rule.rule_action.substring(rule.rule_action.indexOf('(')+1,
                                                                     rule.rule_action.lastIndexOf(')')).replace('"','').replace('"','')}}
                                                                  </span>
                                                            </div>
                                                        </li>
                                                        <li>
                                                            <div class="input-group">
                                                                 <span  class="otherwiseBlock">
                                                                      otherwise
                                                                 </span>
                                                                 <span class="otherwiseDataBlock">
                                                                       {{rule.rule_failure.substring(rule.rule_failure.indexOf('(')+1,
                                                                     rule.rule_failure.lastIndexOf(')')).replace('"','').replace('"','')}}
                                                                 </span>
                                                            </div>
                                                        </li>
                                                    </ul>
                                                </div>
                                                <div class="row " ng-show="rule.editMode">
                                                    <div class="col-md-12 text-center">
                                                        <button type="button" class="btn btn-primary" data-ng-click="editThisRule(rule)">
                                                            apply changes
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                </div>
                            </div>
                        </div>




                </div>

                <div ng-switch-when="false">
                    <div class="rule-head">
                        <div class="row">
                            <div class="col-md-12 ">
                                <div ng-if="isNewRule" class="text-center "><i class="fa fa-pencil"></i> create new rule
                                    <span class="mouse_point pull-right" data-ng-click="setRuleDiv()"><i class="fa fa-remove ash-c"></i></span>
                                </div>
                                <div ng-if="!isNewRule" class="text-center "><i class="fa fa-pencil"></i> edit existing rule
                                    <span class="mouse_point pull-right" data-ng-click="setRuleDiv()"><i class="fa fa-remove ash-c"></i></span>
                                </div>
                                <div class="font_12" ng-if="rule_name!=undefined">[ {{rule_name}} ]</div>

                            </div>

                        </div>

                    </div>

                     <div class="panel-body">

                         <div ng-show="showRuleForm">
                             <!--<div class="row">-->
                                 <!--<div class="col-md-12 text-center">-->
                                     <!--<label class="control-label">-->
                                         <!--i want to create-->
                                     <!--</label>-->
                                 <!--</div>-->
                             <!--</div>-->
                             <div class="divider-lg"></div>
                             <div class="divider-md"></div>
                             <div class="row">
                                 <!--<div class="col-md-3">-->
                                    <!---->
                                 <!--</div>-->
                                 <div class="col-md-12">
                                     <div class="text-center ">

                                     <div>
                                         <span class="mouse_point rule_box color-blue-1" ng-click="setRuleForm('daas')" >
                                                 data extraction rule
                                             </span>&nbsp;
                                         <!--</div>-->
                                         <!--<div class="col-md-3">-->
                                             <span class="mouse_point rule_box color-blue-1" ng-click="setRuleForm('bpaas')" >
                                                 business process rule
                                             </span>&nbsp;

                                         <!--</div>-->
                                         <!--<div class="col-md-4">-->
                                             <span class="mouse_point rule_box color-blue-1">
                                                 output service rule
                                             </span>&nbsp;
                                         <!--</div>-->
                                     </div>

                                     </div>

                                 </div>
                             </div>
                             <div class="divider-lg"></div>
                         </div>

                         <div ng-hide="showRuleForm" ng-switch="formVariable">
                             <div ng-switch-when="on">
                                 <form class="form-horizontal"  data-ng-submit="addNewRule(r)">
                                     <div class="wizard-container margin-top-10">

                                         <div class="row">

                                             <div class="col-md-3 ">
                                                 <div class="text-center">
                                                     <span class="number" ng-class="currentTab=='homePage'?'number-active':'';">1</span>
                                                     <span class="desc">home</span>
                                                 </div>
                                             </div>
                                             <div class="col-md-3">
                                                 <div class="text-center">
                                                     <span class="number " ng-class="currentTab=='condition'?'number-active':''">2</span>
                                                     <span class="desc">rule config</span>
                                                 </div>
                                             </div>
                                             <div class="col-md-3">
                                                 <div class="text-center">
                                                     <span class="number" ng-class="currentTab=='settings'?'number-active':''">3</span>
                                                     <span class="desc">settings</span>
                                                 </div>
                                             </div>
                                             <div class="col-md-3">
                                                 <div class="text-center">
                                                     <span class="number" ng-class="currentTab=='summary'?'number-active':''">4</span>
                                                     <span class="desc">summary</span>
                                                 </div>
                                             </div>
                                         </div>
                                     </div>

                                     <div ng-show="currentTab=='homePage'?true:false">
                                         <div class="divider-lg"></div>
                                        <div class="row">
                                            <div class="col-md-offset-2 col-md-8">
                                                <div class="row ">
                                                    <div class="col-md-3">
                                                        <label>name</label>
                                                    </div>
                                                    <div class="col-md-9">
                                                        <input type="text" ng-change="setRuleName(r.name)"  required class="form-control" ng-model="r.name">
                                                    </div>
                                                </div>
                                                <div class="divider"></div>
                                                <div class="row ">
                                                    <div class="col-md-3">
                                                        <label>description</label>
                                                    </div>
                                                    <div class="col-md-9">
                                     <textarea class="form-control" required rows="2" ng-model="r.desc">

                                     </textarea>
                                                    </div>
                                                </div>
                                                <div class="divider"></div>

                                                <div class="row ">
                                                    <div class="col-md-3">
                                                        <label>industry</label>
                                                    </div>
                                                    <div class="col-md-9">
                                                        <!--{{formsOfIndustry}}-->
                                                        <select  ng-change="selectEfs(r.industry)" required class="form-control" ng-model="r.industry">
                                                            <option ng-selected="$index == {{index}}" ng-repeat="indus in industryList" value="{{indus.industry}}">{{indus.industry}}</option>
                                                        </select>
                                                    </div>
                                                </div>
                                                <div class="divider"></div>

                                                <div class="row ">
                                                    <div class="col-md-3">
                                                        <label>form</label>
                                                    </div>
                                                    <div class="col-md-9">
                                                        <select required=""   ng-change="selectFormField(r.form_types)" ng-model="r.form_types" class="form-control">
                                                            <option value="{{form.efs_uin}}" ng-selected="$index == {{efsIndex}}" ng-repeat="form in efsOfIndustry">{{form.form_type}}</option>
                                                        </select>
                                                    </div>
                                                </div>
                                                <div class="divider"></div>

                                            </div>
                                        </div>

                                         <div class="row ">
                                             <div class="col-md-12">
                                                 <div class="pull-right">
                                                     <button type="button" class="btn_hethi btn-w-md btn-info" data-ng-click="setCurrentTab('condition',r)">
                                                         next&nbsp;
                                                         <span class="fa fa-forward">  </span>
                                                     </button>
                                                 </div>
                                             </div>
                                         </div>
                                     </div>

                                     <div ng-show="currentTab=='condition'?true:false" >
                                         <div class="row">
                                             <div class="col-md-12">
                                                 <div class="panel panel-info margin-top-10"   >
                                                     <div  class="panel-heading">
                                                         <span style="font-size: 20px">when</span>
                                                     </div>
                                                     <div class="">
                                                         <div style="width:auto" id="style-7">
                                                             <div class="force-overflow">
                                                                 <div class="panel panel-body ">
                                                                     <div class="divider-md"></div>
                                                                     <div ng-show="ruleType == 'simple'">
                                                                         <div class="row " ng-show="isNewRule" ng-if="$last" ng-repeat="rule in dynamicRule" ng-init="outerIndex=$index">
                                                                                 <div class="col-md-6">
                                                                                     <!--{{rule}}-->
                                                                                     <div ng-repeat="fd in rule.fieldArray" class="margin-bottom-10">
                                                                                         <div class="row" >
                                                                                             <div class="col-md-1">
                                                                                                 <label>Field </label>
                                                                                             </div>
                                                                                             <div class="col-md-6">
                                                                                                 <select ng-change="setFieldKey()"  ng-model="fd.field" class="form-control">
                                                                                                     <option value="{{field.column}}" ng-selected="$index == {{fieldIndex}}" ng-repeat="field in selectedEfsUin">{{field.column}}</option>
                                                                                                 </select>
                                                                                             </div>
                                                                                             <div class="col-md-5">
                                                                                                 <div class="btn-group">
                                                                                                     <button ng-click="fd.tableIndex=true" ng-class="fd.tableIndex?'active btn btn-line-primary':'btn btn-line-primary'" btn-radio="'table'"  ng-model="r.field_type">in table</button>
                                                                                                     <button ng-click="fd.tableIndex=false" ng-class="fd.tableIndex?'btn btn-line-primary':'active btn btn-line-primary'" btn-radio="'header'"  ng-model="r.field_type">not in table</button>
                                                                                                 </div>

                                                                                             </div>
                                                                                             <!--<div class="col-md-3">-->
                                                                                                 <!--<span ng-if="rule.fieldArray.length > 1" ng-click="rule.fieldArray.splice($index,1)" class="btn_hethi btn-danger">-->
                                                                                                     <!--<i class="fa fa-remove"></i></span>-->
                                                                                                 <!--<span ng-if="$last" ng-click="addNewField($index,outerIndex)" class="btn_hethi btn-info"><i class="fa fa-plus"></i></span>-->
                                                                                             <!--</div>-->
                                                                                         </div>
                                                                                     </div>


                                                                                     <div class="divider-md"></div>

                                                                                     <div class="row">
                                                                                         <div >
                                                                                             <div class="col-md-1">
                                                                                                 <label>Has</label>
                                                                                             </div>
                                                                                             <div class="col-md-6">
                                                                                                 <div class="btn-group">
                                                                                                     <button ng-class="isField=='custom'?'active btn btn-line-primary':'btn btn-line-primary'" ng-click="isField='custom'">custom value</button>
                                                                                                     <!--<button ng-class="isField=='lookup'?'btn btn-success':'btn btn-line-success'" ng-click="isField='lookup'">lookup value</button>-->
                                                                                                     <button ng-class="isField=='field'?'active btn btn-line-primary':'btn btn-line-primary'" ng-click="isField='field'">field value</button>
                                                                                                 </div>
                                                                                             </div>
                                                                                             <div ng-if="isField=='custom'" class="col-md-5">
                                                                                                 <!--<input ng-change="addCriteria(rules.condition)" type="text" ng-model="rules.condition" class="form-control">-->

                                                                                                 <input  placeholder="enter custom input here" type="text" ng-model="rule.condition" class="form-control">
                                                                                             </div>
                                                                                             <div ng-if="isField=='field'" class="col-md-5">
                                                                                                 <select ng-model="rule.entityValue" class="form-control">
                                                                                                     <option value="">select field</option>
                                                                                                     <option value="{{field.column}}" ng-repeat="field in selectedEfsUin">{{field.column}}</option>
                                                                                                 </select>
                                                                                             </div>

                                                                                         </div>
                                                                                     </div>
                                                                                     <div class="divider-md"></div>

                                                                                     <div class="row margin-bottom-20" >
                                                                                         <div class="col-md-3">
                                                                                             <label>Default value</label>
                                                                                         </div>
                                                                                         <div class="col-md-5">
                                                                                             <div class="btn-group">
                                                                                                 <button ng-class="isRequired?'active btn btn-line-primary':'btn btn-line-primary'" ng-click="isRequired=!isRequired">not required</button>
                                                                                                 <button ng-class="isRequired?'btn btn-line-primary':'active btn btn-line-primary'" ng-click="isRequired=!isRequired">required</button>
                                                                                             </div>
                                                                                         </div>
                                                                                         <div ng-show="!isRequired" class="col-md-4">
                                                                                             <!--<input ng-change="addCriteria(rules.condition)" type="text" ng-model="rules.condition" class="form-control">-->

                                                                                             <input  type="text"  ng-model="rule.default" class="form-control">
                                                                                         </div>

                                                                                     </div>

                                                                                 </div>

                                                                                 <div class="col-md-6">
                                                                                     <div class="row" ng-repeat="newOper in rule.functions">
                                                                                         <div class="col-md-2">
                                                                                             <label ng-if="$first">Operation</label>
                                                                                         </div>
                                                                                         <div class="col-md-4">
                                                                                             <select ng-change="selectOperators(id)" ng-model="id"  class=" form-control " >
                                                                                                 <option value="">operations</option>
                                                                                                 <option ng-if="key != 'Look Up'" ng-repeat="(key,value) in typeOfOperators" value="{{key}}">{{key}}</option>
                                                                                             </select>
                                                                                         </div>

                                                                                         <div class="col-md-6">
                                                                                             <div class="input-group margin-bottom-5">
                                                                                                 <select  ng-model="newOper.operator" ng-change="setFunctionCall(newOper.operator)"  class=" form-control " >
                                                                                                     <option value="">operator</option>
                                                                                                     <option ng-repeat="opera in operators" value="{{opera}}">{{opera.operation_name}}</option>
                                                                                                 </select>
                                                                                                 <span ng-if="$last" ng-click="addNewOperation($index,outerIndex)" class="mouse_point input-group-addon"  data-placement="bottom"
                                                                                                      title="Add New Operation">
                                                                                                      <span class="fa fa-plus"></span>
                                                                                                 </span>
                                                                                                 <span ng-if="!$last" ng-click="rule.functions.splice($index,1)" class="mouse_point input-group-addon"  data-placement="bottom"
                                                                                                       title="Remove this Operation">
                                                                                                       <span class="fa fa-remove"></span>
                                                                                                 </span>
                                                                                             </div>

                                                                                         </div>

                                                                                     </div>

                                                                                 </div>
                                                                                 <div class="row ">
                                                                                     <div class="col-md-12">
                                                                                         <div class="text-center">
                                                                                             <button type="button" ng-click="addNewCondition($index,'&&')" class="btn-w-md btn_hethi btn-primary ">save condition</button>
                                                                                             <!--<button ng-if="$last" type="button" ng-click="addNewCondition($index,'||')" class="btn_hethi btn-info"><i class="fa fa-plus-circle"></i> OR Condition</button>-->
                                                                                         </div>
                                                                                     </div>
                                                                                 </div>
                                                                             </div>
                                                                         </div>
                                                                     <div ng-show="ruleType == 'computation'" >
                                                                         <div ng-repeat="rule in dynamicRules" ng-init="outerIndex=$index" ng-if="$last">
                                                                             <div class="opBlock margin-bottom-20">
                                                                                 <div class="row margin-bottom-20 col-md-offset-1">
                                                                                     <div class="col-md-3">
                                                                                         <span>apply logical operation</span>
                                                                                     </div>
                                                                                     <div class="col-md-6">
                                                                                         <div class="input-group">
                                                                                             <input type="text" readonly class="form-control" ng-model="rule.opera">
                                                                                     <span type="button" class="btn btn-danger input-group-addon " style="color: #ffffff" data-toggle="modal" data-target="#operationPalette">
                                                                                         <i class="fa fa-search"></i> browse
                                                                                     </span>
                                                                                         </div>

                                                                                     </div>

                                                                                 </div>
                                                                                 <div class="row margin-bottom-20 col-md-offset-1"  ng-show="requireValue">
                                                                                     <div class="col-md-3">
                                                                                         <span>{{customInfo}}</span>
                                                                                     </div>

                                                                                     <div class="col-md-3">
                                                                                         <select ng-if="btnType1 == 'field'"  ng-model="rule.outputEntity" class="form-control">
                                                                                             <option value="">select field</option>
                                                                                             <option value="{{field.column}}" ng-repeat="field in selectedEfsUin">{{field.column}}</option>
                                                                                         </select>
                                                                                         <input ng-if="btnType1 == 'custom'"  ng-model="rule.customInput" type="text" class="form-control" placeholder="enter value">

                                                                                         <div ng-if="btnType1 == 'calendar'" class="input-group ui-datepicker">
                                                                                             <input type="text"
                                                                                                    class="form-control"
                                                                                                    datepicker-popup="{{format}}"
                                                                                                    ng-model="rule.condition1"
                                                                                                    is-open="opened"
                                                                                                    min="minDate"
                                                                                                    datepicker-options="dateOptions"
                                                                                                    ng-required="true"
                                                                                                    close-text="Close">
                                                                                             <span class="input-group-addon" ng-click="open($event)"><i class="fa fa-calendar"></i></span>
                                                                                         </div>

                                                                                     </div>
                                                                                     <div class="col-md-3">
                                                                                         <div class="btn-group" ng-if="custom_type_options.length > 0">
                                                                                             <button type="button" btn-radio="{{$index}}" ng-class="op.status == 1 ?'active btn btn-line-primary':'btn btn-line-primary'"
                                                                                                     ng-repeat="op in custom_type_options" data-ng-click="selectOption($index)">{{op.option}}</button>
                                                                                         </div>
                                                                                     </div>
                                                                                     <div class="col-md-1">
                                                                                 <span ng-if="btnType1 == 'custom' && !messageFlag" ng-class="!messageFlag?'text-success':'text-danger'">
                                                                                     {{message_text}}</span>
                                                                                     </div>

                                                                                 </div>
                                                                             </div>
                                                                             <div class="cardPack margin-bottom-20">
                                                                                 <div ng-repeat="input in rule.inputFields"  style="padding: 5px">
                                                                                     <div class="row col-md-offset-1">
                                                                                         <div class="col-md-11 card">
                                                                                             <div class="row margin-bottom-10 col-md-12">
                                                                                                 <div style="width:10px;height:10px;border-radius: 200%;background-color: #FEEADE;
                                                                                                       border: 1px solid #329d76">

                                                                                                 </div>
                                                                                             </div>
                                                                                             <div class="row margin-bottom-20">
                                                                                                 <div class="col-md-2">
                                                                                                     <span >on form entity</span>
                                                                                                 </div>

                                                                                                 <div class="col-md-3">
                                                                                                     <select ng-model="input.entity" class="form-control">
                                                                                                         <option value="">select entity</option>
                                                                                                         <option value="{{field.column}}" ng-repeat="field in selectedEfsUin" ng-if="field.column !='din' && field.column!='version'
                                                                                                          && field.column !='uid' && field.column !='efs_uin'">{{field.column}}</option>
                                                                                                     </select>
                                                                                                 </div>
                                                                                                 <div  class="col-md-4">
                                                                                                     <div class="btn-group" >
                                                                                                         <button type="button"  ng-click="changeStatus(true,$index,outerIndex)" ng-class="input.tableRequired?'btn btn-line-primary active':'btn btn-line-primary'">
                                                                                                             with look up
                                                                                                         </button>
                                                                                                         <button type="button"  ng-click="changeStatus(false,$index,outerIndex)" ng-class="input.tableRequired?'btn btn-line-primary':'btn btn-line-primary active'">
                                                                                                             without look up
                                                                                                         </button>
                                                                                                     </div>
                                                                                                 </div>



                                                                                             </div>
                                                                                             <div class="row margin-bottom-20">
                                                                                                 <div class="col-md-1" style="text-align: right;font-size: 15px">
                                                                                                     <span ng-show="input.tableRequired" class="fa fa-hand-o-right color-info"></span>
                                                                                                     <!--<span ng-show="input.tableRequired" class="fa fa-angle-right color-info"></span>-->
                                                                                                 </div>
                                                                                                 <div class="col-md-1">
                                                                                                     <span ng-show="input.tableRequired">from</span>
                                                                                                 </div>

                                                                                                 <div class="col-md-3">
                                                                                                     <select ng-change="selectLookupEntity(input.lookup)" required="" ng-show="input.tableRequired" ng-model="input.lookup" class="form-control">
                                                                                                         <option value="">lookup repository</option>
                                                                                                         <option ng-repeat="tables in typeOfOperators['Look Up']" value="{{tables.operation_name}}">{{tables.operation_name}}</option>
                                                                                                     </select>
                                                                                                 </div>
                                                                                                 <div class="col-md-2" ng-show="input.tableRequired">
                                                                                                     <span>for entity</span>
                                                                                                 </div>
                                                                                                 <div class="col-md-3" ng-show="input.tableRequired">
                                                                                                     <select required="" ng-model="input.lookupEntity" class="form-control">
                                                                                                         <option value="">select entity</option>
                                                                                                         <option value="{{entity.column}}" ng-repeat="entity in selectedLookup">{{entity.column}}</option>
                                                                                                     </select>
                                                                                                 </div>

                                                                                             </div>

                                                                                         </div>
                                                                                         <div class="col-md-1">
                                                                                             <div class="row col-md-12">
                                                                                               <span data-toggle="tooltip" data-placement="top"
                                                                                                     tooltip="remove this form entity"
                                                                                                     tooltip-placement="top" ng-click="rule.inputFields.splice($index,1)" ng-if="rule.inputFields.length > 1"
                                                                                                     class="btn btn-danger mouse_point margin-bottom-5">
                                                                                                    <i class="fa fa-remove"></i>
                                                                                               </span>
                                                                                               <span style="text-align: right" data-toggle="tooltip" data-placement="top"
                                                                                                     tooltip="add new form entity"
                                                                                                     tooltip-placement="top" data-ng-click="rule.inputFields.push({id:rule.inputFields.length+1,status:false})" ng-if="$last" class="btn btn-info mouse_point">                                                                                                     <i class="fa fa-plus"></i>
                                                                                               </span>
                                                                                             </div>

                                                                                         </div>
                                                                                     </div>

                                                                                 </div>
                                                                             </div>



                                                                         </div>



                                                                         <div class="row col-md-offset-1" >
                                                                             <div class="col-md-9"></div>
                                                                             <div class="col-md-3 ">
                                                                                 <button class="btn_hethi btn-primary form-control" type="button" ng-click="setCondition()">set condition</button>
                                                                             </div>

                                                                         </div>

                                                                     </div>



                                                                     <div class="divider-lg"></div>

                                                                     <div ng-show="created"  ng-click="showList=!showList" class="row margin-top-20 margin-bottom-10 mouse_point">
                                                                         <div class="col-md-12">
                                                                             <span class="text-primary h3"></i> condition list</span>
                                                                             <span ng-show="showList">view <i  class="fa fa-hand-o-down"></i></span>
                                                                             <span ng-hide="showList">hide <i  class="fa fa-hand-o-up"></i></span>
                                                                         </div>
                                                                     </div>
                                                                     <div ng-if="ruleType == 'computation'" ng-hide="showList" ng-show="!errorStatus" ng-if="rule1.condition_statement != undefined && created" style="padding: 5px"  class="margin-bottom-5 bg_txt"
                                                                          data-ng-repeat="rule1 in dynamicRules">

                                                                         <div class="row margin-top-10 margin-bottom-20 ">

                                                                             <div class="col-md-6" >
                                                                                 <span >{{$index+1}} apply <i class="text-primary h5">{{rule1.opera}}</i> for <i class="text-primary h5">{{rule1.condition_statement}}</i></span>

                                                                             </div>
                                                                             <div class="col-md-2">
                                                                                 <span ng-if="!$first" data-ng-click="removeCondition($index)" class="btn_hethi_square btn-danger">
                                                                                     <i class="fa fa-remove"></i></span>
                                                                             </div>
                                                                         </div>
                                                                     </div>
                                                                     <div ng-show="errorStatus"  ng-click="change()" class="row margin-top-20 margin-bottom-10 mouse_point">
                                                                         <div class="col-md-12">
                                                                             <span class="text-danger h3"></i> Errors</span>
                                                                             <span ng-show="!errorList">view <i  class="fa fa-hand-o-down"></i></span>
                                                                             <span ng-hide="!errorList">hide <i  class="fa fa-hand-o-up"></i></span>
                                                                         </div>
                                                                     </div>
                                                                     <div ng-show="errorList" style="padding: 5px"  class="margin-bottom-5 bg_txt" >

                                                                         <div class="row margin-top-10 margin-bottom-20 ">
                                                                             <div class="col-md-6">
                                                                                 <span class="text-danger">
                                                                                     <i class="fa fa-close"></i>
                                                                                     you have missed value for <i class="text-primary h5">{{errorKeys}}</i></span>
                                                                             </div>

                                                                         </div>
                                                                     </div>
                                                                 </div>
                                                             </div>
                                                         </div>


                                                     </div>

                                                 </div>

                                             </div>
                                         </div>
                                         <div class="row">
                                             <div class="col-md-6">
                                                 <div class="panel panel-info">
                                                     <div class="panel-heading">
                                                         <span style="font-size: 20px">then</span>
                                                     </div>
                                                     <div class="panel-body" style="height:auto; width: auto; overflow-y: auto">
                                                         <div ng-show="isNewRule" class="row margin-top-10">
                                                             <div class="col-md-4" style="border-right: 1px solid #dcdcdc; text-transform: lowercase">
                                                                 <div class="wrap">
                                                                     <ul >
                                                                         <li style="padding:10px;border:1px solid #dcdcdc" ng-class="exception?'btn-line-primary active mouse_point':'btn-line-primary mouse_point'"
                                                                             ng-click="setSuccessTab('exception')" >Route to Exception</li>
                                                                         <li style="padding:10px;border:1px solid #dcdcdc" ng-class="mapping?'btn-line-primary active mouse_point':'btn-line-primary mouse_point'"
                                                                             ng-click="setSuccessTab('mapping')" >Map to Field</li>
                                                                         <li style="padding:10px;border:1px solid #dcdcdc" ng-class="queue?'btn-line-primary active mouse_point':'btn-line-primary mouse_point'"
                                                                             ng-click="setSuccessTab('queue')" >Map to Queue</li>
                                                                         <li style="padding:10px;border:1px solid #dcdcdc" ng-class="isReturn?'btn-line-primary active mouse_point':'btn-line-primary mouse_point'"
                                                                             ng-click="setSuccessTab('isReturn')" >Return</li>
                                                                         <li style="padding:10px;border:1px solid #dcdcdc" ng-class="rule?'btn-line-primary active mouse_point':'btn-line-primary mouse_point'"
                                                                             ng-click="setSuccessTab('rule')" >Rule</li>
                                                                         <!--<li style="padding:10px;border:1px solid #dcdcdc" ng-class="default?'btn-success':'btn-line-success'"-->
                                                                         <!--ng-click="setActionTab('default')" >Set Defalut Value</li>-->
                                                                     </ul>
                                                                 </div>

                                                             </div>
                                                             <div class="col-md-8">
                                                                 <div  style="height: 250px; text-transform: lowercase" ng-switch="tabText">
                                                                     <div ng-switch-when="exception">
                                                                         <div  class="row margin-top-10">
                                                                             <div class="col-md-5">
                                                                                 <label >queue name</label>
                                                                             </div>
                                                                             <div class="col-md-7">
                                                                                 <select  class="form-control" ng-model="exceptionField" ng-change="setException(exceptionField)">
                                                                                     <option>Select Queue Name</option>
                                                                                     <option ng-if="efs==exception.efs_uin" value="{{exception}}" ng-repeat="exception in exceptionList">{{exception.exception_name}}</option>
                                                                                 </select>
                                                                             </div>
                                                                         </div>

                                                                     </div>
                                                                     <div ng-switch-when="mapping">
                                                                         <div  class="row margin-top-10">
                                                                             <div class="col-md-5">
                                                                                 <label>Form Field</label>
                                                                             </div>
                                                                             <div class="col-md-7">
                                                                                 <select ng-required="showSingle" ng-change="formActionStatement(field2)" ng-model="field2" class="form-control">
                                                                                     <option value="">-- select form field--</option>
                                                                                     <option value="{{field.column}}" ng-repeat="field in selectedEfsUin">{{field.column}}</option>
                                                                                 </select>
                                                                             </div>
                                                                         </div>

                                                                     </div>
                                                                     <div ng-switch-when="queue">
                                                                         <div  class="row margin-top-10">
                                                                             <div class="col-md-5">
                                                                                 <label >Queue Group</label>
                                                                             </div>
                                                                             <div class="col-md-7">
                                                                                 <select ng-change="setQueueList(queue_group)" ng-model="queue_group"  class="form-control">
                                                                                     <option>Select Queue code</option>
                                                                                     <option ng-repeat="group in queueGroup" value="{{group.hethi_service_id}}">{{group.hethi_servicecode}}</option>
                                                                                 </select>
                                                                             </div>
                                                                         </div>
                                                                         <div  class="row margin-top-10">
                                                                             <div class="col-md-5">
                                                                                 <label >Queue Name</label>
                                                                             </div>
                                                                             <div class="col-md-7">
                                                                                 <select ng-model="queue_name" data-ng-change="addProcessQueue(queue_name)" class="form-control">
                                                                                     <option>Select Queue Name</option>
                                                                                     <option ng-repeat="queue in tempQueueGroup" value="{{queue.hethi_subservicecode}}">{{queue.hethi_subservicecode}}</option>
                                                                                 </select>
                                                                             </div>
                                                                         </div>
                                                                         <div  class="row margin-top-10">
                                                                             <div class="col-md-5">
                                                                                 <label >Message</label>
                                                                             </div>
                                                                             <div class="col-md-7">
                                                             <textarea ng-model="process_message" class="form-control" rows="2">
                                                             </textarea>
                                                                             </div>
                                                                         </div>
                                                                     </div>
                                                                     <div ng-switch-when="isReturn">
                                                                         <div class="row margin-top-10">
                                                                             <div class="col-md-4">
                                                                                 <label >Rule return </label>
                                                                             </div>
                                                                             <div class="col-md-8">
                                                                                 <div class="btn-group">
                                                                                     <button ng-click="setReturnValue(returnStatus)" ng-class="returnStatus?'btn btn-line-primary active':'btn btn-line-primary'" btn-radio="true" ng-model="returnStatus">True</button>
                                                                                     <button ng-click="setReturnValue(returnStatus)" ng-class="returnStatus?'btn btn-line-primary':'btn btn-line-primary active'" btn-radio="false" ng-model="returnStatus">False</button>
                                                                                 </div>
                                                                                 <label>&nbsp; value</label>
                                                                             </div>
                                                                             <!--<div class="col-md-1">-->
                                                                                 <!--<label >value</label>-->
                                                                             <!--</div>-->
                                                                         </div>
                                                                     </div>
                                                                     <div ng-switch-when="rule">
                                                                         <div  class="row margin-top-10">
                                                                             <div class="col-md-4">
                                                                                 <label>Rule name</label>
                                                                             </div>


                                                                             <div class="col-md-8">
                                                                                 <select   ng-model="field" class="form-control">
                                                                                     <option ng-if="rule.ruleset_id==currentRuleSet" value="{{rule.rule_uin}}" ng-repeat="rule in rulesList">{{rule.rule_name}}</option>
                                                                                 </select>
                                                                             </div>
                                                                         </div>

                                                                     </div>
                                                                     <div ng-switch-when="default">
                                                                         <div  class="row margin-top-10">
                                                                             <div class="col-md-6">
                                                                                 <label>Default value</label>
                                                                             </div>


                                                                             <div class="col-md-6">
                                                                                 <input type="text" class="form-control" ng-model="defaultV">
                                                                             </div>
                                                                         </div>

                                                                     </div>
                                                                 </div>

                                                             </div>
                                                         </div>
                                                         <div ng-hide="isNewRule" class="row margin-top-10">
                                                             <div class="col-md-12">
                                                                 <span class="text-primary"><i class="fa fa-info-circle"></i>. {{actionEvent}}</span>
                                                             </div>
                                                         </div>
                                                     </div>



                                                 </div>

                                             </div>
                                             <div class="col-md-6">
                                                 <div class="panel panel-info "  >
                                                     <div  class="panel-heading">
                                                         <span style="font-size: 20px">otherwise</span>
                                                     </div>
                                                     <div class="panel-body" style="height: auto; width: auto; overflow-y: auto; text-transform: lowercase">
                                                         <div ng-show="isNewRule" class="row margin-top-10">
                                                             <div class="col-md-4" style="border-right: 1px solid #dcdcdc">
                                                                 <div class="wrap">
                                                                     <ul >
                                                                         <li style="padding:10px;border:1px solid #dcdcdc" ng-class="fException?'btn-line-primary active mouse_point':'btn-line-primary mouse_point '"
                                                                             ng-click="setFailureTab('fException')" >Route to Exception</li>
                                                                         <li style="padding:10px;border:1px solid #dcdcdc" ng-class="fMapping?'btn-line-primary active mouse_point':'btn-line-primary mouse_point'"
                                                                             ng-click="setFailureTab('fMapping')" >Map to Field</li>
                                                                         <li style="padding:10px;border:1px solid #dcdcdc" ng-class="fQueue?'btn-line-primary active mouse_point':'btn-line-primary mouse_point'"
                                                                             ng-click="setFailureTab('fQueue')" >Map to Queue</li>
                                                                         <li style="padding:10px;border:1px solid #dcdcdc" ng-class="fIsReturn?'btn-line-primary active mouse_point':'btn-line-primary mouse_point'"
                                                                             ng-click="setFailureTab('fIsReturn')" >Return</li>
                                                                         <li style="padding:10px;border:1px solid #dcdcdc" ng-class="fRule?'btn-line-primary active mouse_point':'btn-line-primary mouse_point'"
                                                                             ng-click="setFailureTab('fRule')" >Rule</li>
                                                                         <!--<li style="padding:10px;border:1px solid #dcdcdc" ng-class="default?'btn-success':'btn-line-success'"-->
                                                                         <!--ng-click="setActionTab('default')" >Set Defalut Value</li>-->
                                                                     </ul>
                                                                 </div>


                                                             </div>
                                                             <div class="col-md-8">
                                                                 <div  style="height: 250px;" ng-switch="failureTab">
                                                                     <div ng-switch-when="fException">
                                                                         <div  class="row margin-top-10">
                                                                             <div class="col-md-5">
                                                                                 <label >Queue Name</label>
                                                                             </div>
                                                                             <div class="col-md-7">
                                                                                 <select  class="form-control" ng-model="exceptionField2" ng-change="setFailureException(exceptionField2)">
                                                                                     <option>Select Queue Name</option>
                                                                                     <option ng-if="efs==exception.efs_uin" value="{{exception}}" ng-repeat="exception in exceptionList">{{exception.exception_name}}</option>
                                                                                 </select>
                                                                             </div>
                                                                         </div>

                                                                     </div>
                                                                     <div ng-switch-when="fMapping">
                                                                         <div  class="row margin-top-10">
                                                                             <div class="col-md-5">
                                                                                 <label>Form Field</label>
                                                                             </div>
                                                                             <div class="col-md-7">
                                                                                 <select ng-required="showSingle" ng-change="formFailureStatement(failurefield)" ng-model="failurefield" class="form-control">
                                                                                     <option value="">select form field</option>
                                                                                     <option value="{{field.column}}" ng-repeat="field in selectedEfsUin">{{field.column}}</option>
                                                                                 </select>
                                                                             </div>
                                                                         </div>

                                                                     </div>
                                                                     <div ng-switch-when="fQueue">
                                                                         <div  class="row margin-top-10">
                                                                             <div class="col-md-5">
                                                                                 <label >Queue Group</label>
                                                                             </div>
                                                                             <div class="col-md-7">
                                                                                 <select ng-change="setQueueList(queue_group)" ng-model="queue_group"  class="form-control">
                                                                                     <option>Select Queue code</option>
                                                                                     <option ng-repeat="group in queueGroup" value="{{group.hethi_service_id}}">{{group.hethi_servicecode}}</option>
                                                                                 </select>
                                                                             </div>
                                                                         </div>
                                                                         <div  class="row margin-top-10">
                                                                             <div class="col-md-5">
                                                                                 <label >Queue Name</label>
                                                                             </div>
                                                                             <div class="col-md-7">
                                                                                 <select ng-model="queue_name1" data-ng-change="addFailureProcessQueue(queue_name1)" class="form-control">
                                                                                     <option>Select Queue Name</option>
                                                                                     <option ng-repeat="queue in tempQueueGroup" value="{{queue.hethi_subservicecode}}">{{queue.hethi_subservicecode}}</option>
                                                                                 </select>
                                                                             </div>
                                                                         </div>
                                                                         <div  class="row margin-top-10">
                                                                             <div class="col-md-5">
                                                                                 <label >Message</label>
                                                                             </div>
                                                                             <div class="col-md-7">
                                                             <textarea ng-model="process_message" class="form-control" rows="2">
                                                             </textarea>
                                                                             </div>
                                                                         </div>
                                                                     </div>
                                                                     <div ng-switch-when="fIsReturn">
                                                                         <div class="row margin-top-10">
                                                                             <div class="col-md-4">
                                                                                 <label >Rule return </label>
                                                                             </div>
                                                                             <div class="col-md-8">
                                                                                 <div class="btn-group">
                                                                                     <button ng-click="setReturnValue(returnStatus1)" ng-class="returnStatus1?'btn btn-line-primary active':'btn btn-line-primary'" btn-radio="true" ng-model="returnStatus1">True</button>
                                                                                     <button ng-click="setReturnValue(returnStatus1)" ng-class="returnStatus1?'btn btn-line-primary':'btn btn-line-primary active'" btn-radio="false" ng-model="returnStatus1">False</button>
                                                                                 </div>
                                                                                 <label> &nbsp; value</label>
                                                                             </div>

                                                                         </div>
                                                                     </div>
                                                                     <div ng-switch-when="fRule">
                                                                         <div  class="row margin-top-10">
                                                                             <div class="col-md-5">
                                                                                 <label>Rule name</label>
                                                                             </div>
                                                                             <div class="col-md-7">
                                                                                 <select   ng-model="field" class="form-control">
                                                                                     <option ng-if="rule.ruleset_id==currentRuleSet" value="{{rule.rule_uin}}" ng-repeat="rule in rulesList">{{rule.rule_name}}</option>
                                                                                 </select>
                                                                             </div>
                                                                         </div>

                                                                     </div>
                                                                     <div ng-switch-when="fDefault">
                                                                         <div  class="row margin-top-10">
                                                                             <div class="col-md-5">
                                                                                 <label>Default value</label>
                                                                             </div>


                                                                             <div class="col-md-7">
                                                                                 <input type="text" class="form-control" ng-model="defaultV">
                                                                             </div>
                                                                         </div>

                                                                     </div>
                                                                 </div>

                                                             </div>
                                                         </div>
                                                         <div ng-hide="isNewRule" class="row margin-top-10">
                                                             <div class="col-md-12">
                                                                 <span class="text-primary"><i class="fa fa-info-circle"></i>. {{failureEvent}}</span>
                                                             </div>
                                                         </div>
                                                     </div>



                                                 </div>

                                             </div>

                                         </div>

                                         <div class="divider"></div>
                                         <div class="row">
                                             <div class="col-md-12">
                                                  <span class="pull-left margin-bottom-20">
                                                      <button type="button" class="btn_hethi btn-w-md btn-info" data-ng-click="setCurrentTab('homePage',r)">
                                                          <span class="fa fa-backward">  </span>
                                                          &nbsp;previous
                                                      </button>
                                                  </span>
                                                 <span class="pull-right margin-bottom-20">
                                                     <button type="button" class="btn_hethi btn-w-md btn-info" data-ng-click="setCurrentTab('settings',r)">
                                                         next&nbsp; <span class="fa fa-forward">  </span>
                                                     </button>
                                                 </span>

                                             </div>
                                         </div>
                                     </div>

                                     <div ng-show="currentTab=='settings'?true:false"  >
                                         <div class="row">
                                             <div class="col-md-offset-2 col-md-8 text-lowercase">

                                                 <div class="divider-lg"></div>

                                                 <div class="row margin-bottom-20">
                                                     <div class="col-md-3">
                                                         <label >Effective Start Date</label>
                                                     </div>
                                                     <div class="col-md-9">
                                                         <div class="input-group ui-datepicker">
                                                             <input type="text"
                                                                    class="form-control"
                                                                    datepicker-popup="{{format}}"
                                                                    ng-model="r.startDate"
                                                                    is-open="opened"
                                                                    min="minDate"
                                                                    datepicker-options="dateOptions"
                                                                    ng-required="true"
                                                                    close-text="Close">
                                                             <span class="input-group-addon" ng-click="open($event)"><i class="fa fa-calendar"></i></span>
                                                         </div>
                                                         <!--<input required type="text" ng-model="r.startDate" class="form-control">-->
                                                     </div>
                                                 </div>
                                                 <div class="row margin-bottom-20">
                                                     <div class="col-md-3">
                                                         <label >Effective end Date</label>
                                                     </div>
                                                     <div class="col-md-9">
                                                         <div class="input-group ui-datepicker">
                                                             <input type="text"
                                                                    class="form-control"
                                                                    datepicker-popup="{{format}}"
                                                                    ng-model="r.endDate"
                                                                    is-open="opened1"
                                                                    min="minDate"
                                                                    datepicker-options="dateOptions"
                                                                    ng-required="true"
                                                                    close-text="Close">
                                                             <span class="input-group-addon" ng-click="open1($event)"><i class="fa fa-calendar"></i></span>
                                                         </div>
                                                         <!--<input type="text" required  ng-model="r.endDate" class="form-control">-->
                                                     </div>
                                                 </div>
                                                 <div class="row " ng-init="r.status=true">
                                                     <div class="col-md-3">
                                                         <label >status</label>
                                                     </div>
                                                     <div class="col-md-9">
                                                         <div class="btn-group text-lowercase">
                                                             <button type="button"  ng-class="r.status?'btn btn-line-primary active':'btn btn-line-primary'" btn-radio="true" ng-model="r.status">enable</button>
                                                             <button type="button"  ng-class="r.status?'btn btn-line-primary':'btn btn-line-primary active'" btn-radio="false" ng-model="r.status">disable</button>
                                                         </div>
                                                     </div>
                                                 </div>

                                                 <div class="divider-md"></div>

                                             </div>
                                         </div>
                                         <div class="row">
                                             <div class="col-md-12">
                                                         <span class="pull-left">
                                                                <button type="button" class="btn_hethi btn-w-md btn-info" data-ng-click="setCurrentTab('condition',r)">
                                                                    <span class="fa fa-backward">  </span>
                                                                    &nbsp;previous
                                                                </button>
                                                         </span>
                                                         <span class="pull-right">
                                                             <button type="button" class="btn_hethi btn-w-md btn-info" data-ng-click="setCurrentTab('summary',r)">
                                                                 next&nbsp; <span class="fa fa-forward">  </span>

                                                             </button>
                                                         </span>
                                             </div>

                                         </div>

                                     </div>

                                     <div ng-show="currentTab=='summary'?true:false" >
                                         <div class="row">
                                             <div class="col-md-12">
                                                 <div class="text-lowercase tab-content clearfix inner_box_shadow">

                                                     <div ng-class="summaryTab?'tab-pane active':'tab-pane'"  >
                                                         <div class="row">

                                                             <div class="col-md-2">

                                                                         <h3>When</h3>

                                                             </div>
                                                             <div class="col-md-10">
                                                             </div>
                                                             <div class="row">
                                                                 <div class="col-md-offset-1 col-md-10">
                                                                     <span style="padding-top: 5px;background-color: #009FFF;color: #ffffff;border-radius: 20px;padding-bottom: 5px; padding-left: 40px;padding-right: 40px;">If</span>
                                                                     <span style="padding-top: 5px;background-color: #009FFF;color: #ffffff;border-radius: 20px;padding-bottom: 5px; padding-left: 40px;padding-right: 40px;">If</span>
                                                                 </div>
                                                             </div>
                                                         </div>
                                                         <div class="row">
                                                             <div class="col-md-2">
                                                                         <h3>Then</h3>
                                                             </div>
                                                             <div class="col-md-10">

                                                             </div>


                                                         </div>

                                                         <div class="row">
                                                             <div class="col-md-2">
                                                                 <h3>Otherwise</h3>
                                                             </div>
                                                             <div class="col-md-10">

                                                             </div>
                                                         </div>
                                                     </div>

                                                     <div ng-class="summaryTab?'tab-pane':'tab-pane active'" >

                                                         <div>
                                                             <div class="row">
                                                                 <div class="col-md-2">
                                                                     <h3>When :</h3>
                                                                 </div>
                                                             </div>
                                                             <div class="row">
                                                                 <div class="col-md-1"></div>
                                                                 <p class="col-md-10">
                                                                     {{conditionList}}
                                                                 </p>
                                                             </div>
                                                             <div class="row">
                                                                 <div class="col-md-2">
                                                                     <h3>Then :</h3>
                                                                 </div>
                                                             </div>
                                                             <div class="row">
                                                                 <div class="col-md-1"></div>
                                                                 <div class="col-md-10">
                                                                     <span>{{actionEvent}}</span>
                                                                 </div>
                                                             </div>

                                                             <div class="row">
                                                                 <div class="col-md-2">
                                                                     <h3>Otherwise </h3>
                                                                 </div>
                                                             </div>
                                                             <div class="row">
                                                                 <div class="col-md-1"></div>
                                                                 <div class="col-md-10">
                                                                     <span>{{failureEvent}}</span>
                                                                 </div>
                                                             </div>

                                                         </div>

                                                     </div>

                                                 </div>
                                             </div>
                                         </div>
                                         <div class="row">
                                             <div class="col-md-12">
                                                 <ul  class="text-lowercase nav nav-pills" style="box-shadow: 1px 1px 1px 1px #d3d3d3;margin-bottom: 20px">
                                                     <li ng-class="summaryTab?'active':''">
                                                         <a href ng-click="changeTab(1)" data-toggle="tab">Design</a>
                                                     </li>
                                                     <li ng-class="summaryTab?'':'active'">
                                                         <a href ng-click="changeTab(0)" data-toggle="tab">Source</a>
                                                     </li>
                                                 </ul>
                                             </div>
                                     </div>
                                         <div class="row">
                                             <div class="col-md-12">
                                                   <span class="pull-left">
                                                         <button type="button" class="btn_hethi btn-w-md btn-info" data-ng-click="setCurrentTab('settings',r)">
                                                             <span class="fa fa-backward">  </span>
                                                             &nbsp;previous
                                                         </button>
                                                   </span>
                                                  <span class="pull-right">
                                                      <button type="button" class="btn_hethi btn-w-md btn-danger" data-ng-click="setRuleDiv()">
                                                          <span class="fa fa-trash-o">  </span>
                                                          &nbsp;cancel
                                                      </button>

                                                      <input ng-show="isNewRule" type="button" data-ng-click="addNewRule(r)" class="btn_hethi btn-w-md btn-primary" value="save">
                                                      <input ng-hide="isNewRule" type="button" data-ng-click="updateExistingRule(r)" class="btn_hethi btn-w-md btn-primary" value="save">
                                                           <!--<span class="fa fa-save">  </span>-->
                                                           <!--&nbsp;save-->

                                                  </span>
                                             </div>
                                         </div>
                                     </div>

                                 </form>

                             </div>
                         </div>
                     </div>

                </div>
            </div>



        </div>
    </div>

    <div class="divider"></div>

    <section data-ng-include="'pages/hethistudio/admin/businessProcess/operationPalette.html'"></section>
    <section data-ng-include="'pages/hethistudio/admin/businessProcess/newPackages.html'"></section>
    <section data-ng-include="'pages/hethistudio/admin/businessProcess/EditPackage.html'"></section>
    <section data-ng-include="'pages/hethistudio/admin/businessProcess/newBusinessRuleSet.html'"></section>
    <section data-ng-include="'pages/hethistudio/admin/businessProcess/EditRuleSet.html'"></section>
    <section data-ng-include="'pages/hethistudio/admin/businessProcess/newWorkSet.html'"></section>
    <section data-ng-include="'pages/hethistudio/admin/businessProcess/EditWorkSet.html'"></section>
    <section data-ng-include="'pages/hethistudio/admin/businessProcess/EditRule.html'"></section>
    <section data-ng-include="'pages/hethistudio/admin/businessProcess/NewRule.html'"></section>
    <section data-ng-include="'pages/hethistudio/admin/businessProcess/ruleRepository.html'"></section>


</div>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        